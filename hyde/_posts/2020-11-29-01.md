---
layout: post
title: 디바이스 
author: author2
chapter: 1장 디바이스드라이버
comments: true
noindex: true
---
>- 디바이스 

# 커널에 자원처리를 요청하는 방법

디바이스 드라이버는 시스템이 지원하는 하드웨어를 응용프로그램에서 사용할 수 있도록 커널에서 제공하는 라이브러리다.

응용프로그램에서 하드웨어를 편리하게 제어하는 방법은 두가지로, 첫번째는 시스템 호출 방식이고 두번째는 파일 입출력 형식으로 디바이스 드라이버를 만드는 방식이다.

## 시스템 호출방식

시스템호출 방식이란 시스템 제어에 필요한 호출 규칙을 정해 놓고, 소프트웨어 인터럽트 서비스를 이용하여 응용 프로그램에서 요청하는 처리를 커널이 수행하는 방식이다.

쉽게 생각하면 커널의 기능을 수행하는 함수(시스템콜)들을 사용하여 조작하는 방식이다.

처음 운영체제가 설계될 당시에는 시스템 호출 방식만 존재했다. 그래서 하드웨어를 제어한다는 것은 시스템 호출을 의미했다.

그러나 시스템에서 사용하는 하드웨어가 늘어나고, 응용 프로그램의 기술이 발전하면서 문제가 생기기 시작했다.

응용프로그램 개발자 입장에서는 알아야할 시스템 호출 관련 내용이 증가하고, 커널 서비스 함수 개발자는 하드웨어의 개발 부담이 증가했다.

## 파일 형식의 디바이스 드라이버

유닉스는 하드웨어를 다루기 위해 기존 시스템 호출 방식과 병행해서 파일 입출력 함수로 하드웨어를 제어하는 개념을 도입힌다.

이 방식은 일반 파일을 제어하듯이 디바이스 파일에 입출력을 시도하면 커널 내의 해당 디바이스 파일에 연결된 디바이스 드라이버의 동작이 호출되어 처리가 이루어진다.

# 모듈과 디바이스 파일

## 모듈

커널이 만들어진 초기에는 리눅스 개발자들이 디바이스 드라이버를 작성하고 테스트하려면 반드시 커널 소스에 포함시켜야 했다.

이런 방식은 커널 컴파일이라는 매우 긴 시간이 필요하다는 의미이다. 또한 수정할 때마다 시스템을 재부팅해야 했다.

커널이 부팅되어 동작하는 중에도 디바이스 드라이버를 수정할 수 있는 방법을 모색했고 그래서 제안된 개념이 모듈이다.

## 디바이스 파일

리눅스에서 도작하는 많은 응용 프로그램은 하드웨어를 직접적으로 다루진 않는다.

응용프로그램을 작성하는 프로그래머에게 하드웨어는 관심의 대상이 아니며, 굳이 하드웨어를 작동시키는 방법에대해 알아야 하는 경우는 많지 않다.

리눅스는 유닉스의 철학을 그대로 물려받았다. 그래서 시스템에 있는 모든 자원을 파일 형식으로 표현한다. 그래서 시스템의 모든 자원을 파일 형식으로 표현한다.

일반적인 파일들은 프로그램에서 데이터를 써넣으면 보존되고 써넣은 크기만큼 파일의 크기가 증가한다.

이와달리 디바이스 파일들은 조금 특이하다. 이 디바이스 파일 하나 하나는 실질적인 하드웨어를 표현한다. 화면에 입력을 넣거나 출력을 처리하는 것 역시 /dev/console 이라는 디바이스 파일로 표현된다.
